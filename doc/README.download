
Model:		TIEGCM
svn Tag:	tiegcm2.0
Release Date:	

Download Site:	http://www.hao.ucar.edu/modeling/tgcm/download.php
                (Model Source and required Data are available as separate downloads)

Documentation:  User Guide and Model description are available in the "doc" directory
                of the model source download. They are also available from tgcm website: 
                http://www.hao.ucar.edu/modeling/tgcm

See also the HAO public ftp site: http://download.hao.ucar.edu/pub/tgcm

-------------------------------------------------------------------------------
These instructions assume the gzipped tar file of the Source Code has
been downloaded from the above URL. After the file is gunzipped 
and the tar file extracted to a working directory, you should have 
something like the following:

README.download			This file
Release_Notes_tiegcm2.0 	Release Notes
tiegcm-linux.job*		Default Linux job script
tiegcm2.0/			Model root directory

Contents of the model root directory:

README		Brief description of subdirectories
doc/		Documentation		User Guide, Model Description, Release Doc
scripts/	Support scripts 	Job scripts, Make files, Utilities
src/		Source code		Source files *.F, *.h
tgcmrun/	Semi-automated testing	Python code to make benchmark runs

To build and run the model, you must also download the data directory
from the above URL, or already have the data in a directory specified
by the $TGCMDATA env var. There are two data downloads: one for the 5-degree
horizontal resolution and another for the 2.5-degree resolution.

>>> IMPORTANT <<<
If you download the data directory, please set environment variable TGCMDATA 
to the full path to the data directory (setenv in your .cshrc file).  This is to 
enable the model to resolve $TGCMDATA if it is used in the model namelist input file)

-------------------------------------------------------------------------------
Follow this procedure to build the model and make a short default run on a Linux system.

1. Copy the csh job script scripts/tiegcm-linux.job to your working directory.
   This default job script is for a 64-bit Linux system with MPI, using 4 processors.
   (actually, this should already be available when you extract the downloaded file) 

2. Make sure your env var $TGCMDATA is set to a directory containing files
   obtained from the data download (check setting of SOURCE file in 
   scripts/tiegcm_res5.0_default.inp)

3. Set the "make" shell variable in the job script to one of the three compiler-specific
   makefiles in the scripts directory: Make.intel_hao64, Make.pgi_hao64,
   or Make.gfort_hao64. Modify the makefile to point to your local
   netCDF and ESMF library locations.

4. Execute the job script on the command line by typing "tiegcm-linux.job"

5. The model will be built, and if successful, the model will execute.
   Stdout will go to the output file in the working directory (or whatever
   the shell variable "output" was set to in the job script).

6. For subsequent runs, copy the default input file from the scripts directory
   to your working directory, rename and edit it for your own run, and reset
   the input shell variable accordingly in the job script.

-------------------------------------------------------------------------------
For building and running on the NCAR supercomputer (currently "yellowstone"),
copy tiegcm-ys.job from the scripts directory, and follow the above steps with
that job script. Also set/change any LSF resources in the #BSUB section of the 
ys script as necessary (queue, wallclock time, project number, nprocs, etc).

The ys job script will build the model on the interactive node, and if successful, 
it will submit the job to LSF. Track the job using the command "bjobs".

-------------------------------------------------------------------------------

The following "Make.machine" files are available in the scripts directory.
These contain platform and machine-specific compiler and link flags, library
locations, etc. Select the Make.machine file you want to use, and set the
"make" shell variable in the job script.

  Make.intel_ys         NCAR IBM cluster "yellowstone" with the intel compiler
  Make.intel_hao64	Intel2011 ifort/mpif90 compiler on 64-bit HAO Linux systems
  Make.pgi_hao64	PGI pgf90/mpif90 compiler on 64-bit HAO Linux systems
  Make.gfort_hao64	GNU gfortran compiler on 64-bit HAO Linux systems

User's are encouraged to customize their own Make.machine files for their
local systems. For the job script to use the file, the "make" shell variable  
should be set to the file name (can be in the working directory or the scripts directory

The model has been built and executed on the following Linux x86_64 platforms:

-- NCAR IBM/Linux cluster yellowstone with Intel 12.1.5 compiler.

-- HAO Linux desktop with Intel 12.0.0 compiler

-- HAO Linux desktop with PGI 9.0-4 compiler

-- HAO Linux desktop with gfortran 4.4.7 compiler

-------------------------------------------------------------------------------
