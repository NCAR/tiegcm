#!/bin/tcsh
#
# Make climatology benchmark runs of tiegcm (smin, smax)
#
# $home:      Base working directory
# $modelroot: Model root directory (with src, scripts, etc)
# $tgcmrun:   Path to tgcmrun executable (python)
#
 set home      = /glade/p/hao/tgcm/tiegcm_benchmarks
 set modelroot = $home/tiegcm_trunk
 set tgcmrun   = $modelroot/tgcmrun/tgcmrun
 set queue     = regular
 set submit    = yes
 set clean     = yes     # if yes, remove stdout, exec, and hist directories before each run

 set runnames =   ( \
   climatology_smax \
   climatology_smin \
 )

 set res50 = 0
 set res25 = 1
#
#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
if (! $res50) then
  echo Not running res5.0 cases
  goto do25
endif
#
# TIEGCM 5.0-deg res: 
#
 set res = 5.0
 set model     = tiegcm_res${res}
 set benchmark = ${model}_climatology
 set stdoutdir = $home/$benchmark
 set execdir   = $home/$benchmark
 set histdir   = $home/$benchmark

 foreach runname ($runnames)
   set case = ${model}_${runname}
   if (clean == 'yes') /bin/rm -vr $home/$benchmark/$case/*
   $tgcmrun -q $queue -run_name $runname -model_name tiegcm -model_res $res -model_root $modelroot \
     -submit $submit -stdout_dir $stdoutdir/$case/stdout -execdir $execdir/$case/exec \
     -hist_dir $histdir/$case/hist
 end
#
#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
do25:
if (! $res25) then
  echo Not running res2.5 cases
  exit
endif
#
# TIEGCM 2.5-deg res:
#
 set res = 2.5
 set model = tiegcm_res${res}
 set benchmark = ${model}_climatology
 set stdoutdir = $home/$benchmark
 set execdir   = $home/$benchmark
 set histdir   = $home/$benchmark

 foreach runname ($runnames)
   set case = ${model}_${runname}
   if (clean == 'yes') /bin/rm -vr $home/$benchmark/$case/*
   $tgcmrun -q $queue -run_name $runname -model_name tiegcm -model_res $res -model_root $modelroot \
     -submit $submit -stdout_dir $stdoutdir/$case/stdout -execdir $execdir/$case/exec \
     -hist_dir $histdir/$case/hist
 end
#- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
